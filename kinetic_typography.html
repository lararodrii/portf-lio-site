<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Landy's Portfolio - Extra Squash</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }

        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>

<body>
    <canvas id="kinetic-canvas"></canvas>

    <script>
        const canvas = document.getElementById('kinetic-canvas');
        const ctx = canvas.getContext('2d');

        // Frase exata para preencher a tela sem sobras
        const phrase = "AQUI TUDO √â POSS√çVEL";

        // --- üîß CONFIGURA√á√ïES ---
        const targetRows = 7;

        const waveSpeed = 0.002;
        const waveFreqY = 0.4;
        const waveFreqX = 0.2;

        let w, h, baseRowHeight, colWidth;

        function resize() {
            w = canvas.width = window.innerWidth * devicePixelRatio;
            h = canvas.height = window.innerHeight * devicePixelRatio;
            ctx.scale(devicePixelRatio, devicePixelRatio);

            baseRowHeight = window.innerHeight / targetRows;

            // Largura exata da coluna
            colWidth = window.innerWidth / phrase.length;
        }

        function draw(time) {
            ctx.fillStyle = "#000";
            ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);

            const numCols = phrase.length;

            const startRow = -6;
            const endRow = targetRows + 6;

            for (let j = 0; j < numCols; j++) {
                const x = j * colWidth;

                let totalColHeight = 0;
                let rowHeights = [];

                for (let i = startRow; i < endRow; i++) {
                    const phase = (time * waveSpeed) - (i * waveFreqY) + (j * waveFreqX);
                    const rawWave = Math.sin(phase);

                    // --- AJUSTE DE ACHATAMENTO (MAIS FORTE) ---
                    // Antes: 0.65 + (0.45 * rawWave)
                    // Agora: 0.45 + (0.65 * rawWave)
                    // Isso permite que o fator des√ßa muito mais (at√© 0.45), ficando bem amassado.
                    // E suba at√© 1.1 (esticado), mantendo a din√¢mica.
                    // Ajustei a base para 0.75 para manter a legibilidade m√©dia.

                    // Varia de 0.35 (Muito Achatado) a 1.15 (Esticado)
                    const squashFactor = 0.75 + (0.40 * rawWave);

                    const h = baseRowHeight * squashFactor;

                    rowHeights.push(h);
                    totalColHeight += h;
                }

                let currentY = (window.innerHeight - totalColHeight) / 2;

                let heightIndex = 0;
                for (let i = startRow; i < endRow; i++) {
                    const h = rowHeights[heightIndex];
                    heightIndex++;

                    const isBlackRow = i % 2 === 0;

                    // BLOCOS
                    ctx.fillStyle = isBlackRow ? "#000" : "#fff";
                    ctx.fillRect(x, currentY, colWidth + 1, h + 1);

                    // TEXTO
                    ctx.fillStyle = isBlackRow ? "#fff" : "#000";

                    ctx.save();
                    ctx.translate(x + colWidth / 2, currentY + h / 2);

                    const fontSize = baseRowHeight * 0.96;

                    ctx.font = `300 ${fontSize}px Montserrat`;

                    ctx.textAlign = "center";
                    ctx.textBaseline = "middle";

                    const charIndex = Math.abs(i + j) % phrase.length;
                    const char = phrase[j % phrase.length];

                    const currentSquash = h / baseRowHeight;

                    ctx.scale(0.95, 0.85 * currentSquash);

                    if (char) {
                        ctx.fillText(char, 0, 0);
                    }

                    ctx.restore();

                    currentY += h;
                }
            }
            requestAnimationFrame(draw);
        }

        window.addEventListener('resize', resize);
        document.fonts.ready.then(() => {
            resize();
            requestAnimationFrame(draw);
        });
    </script>
</body>

</html>